@use "../tokens" as *;
@use "../functions" as *;
@use "../animations" as *;
@import "../mixins";

.ilo--card {
  $self: &;
  $transition-timing: 250ms;
  box-sizing: border-box;
  position: relative;
  background-color: var(--ilo-color-white);
  max-width: var(--max-width);
  flex: 1 1 var(--max-width);

  * {
    @include globaltransition(
      "color, background-color, border-color, opacity, fill"
    );
  }

  &__size__fluid {
    --max-width: 100% !important;
  }

  // Action states: hover, focus, focus-within
  &__action {
    &:hover,
    &:focus,
    &:focus-within {
      outline: none;
      text-decoration: none;
      #{$self}--eyebrow,
      #{$self}--title,
      #{$self}--intro,
      #{$self}--date,
      #{$self}--date-extra {
        color: var(--ilo-color-blue);
      }
    }
  }

  // Themes
  &__theme {
    &__light {
      background: var(--ilo-color-white);
    }
    &__dark {
      background: var(--ilo-color-blue-dark);

      #{$self}--eyebrow,
      #{$self}--title,
      #{$self}--intro,
      #{$self}--date,
      #{$self}--eventdate {
        color: var(--ilo-color-gray-light);
      }

      #{$self}--link {
        &:hover,
        &:focus,
        &:focus-within {
          + #{$self}--wrap {
            #{$self}--eyebrow,
            #{$self}--title,
            #{$self}--intro,
            #{$self}--date,
            #{$self}--eventdate,
            #{$self}--content--item,
            #{$self}--content--item .ilo--icon {
              color: var(--ilo-color-gray-light);
              fill: var(--ilo-color-gray-light);
            }
          }
        }
      }
    }
    &__soft {
      background: var(--ilo-color-blue-lighter);
    }
  }

  // Video style
  &__isvideo {
    #{$self}--image--wrapper {
      position: relative;
      &::before,
      &::after {
        content: "";
        display: block;
        position: absolute;
        top: 0;
        left: 0;
        height: 40px;
        width: 40px;
        z-index: 1;
        background-position: center;
        background-size: 18px 20px;
        background-repeat: no-repeat;
      }
      &::before {
        background-color: var(--ilo-color-gray-charcoal);
      }
      &::after {
        @include icon("caret_right", var(--ilo-color-gray-light));
      }
    }
  }

  &--wrap {
    height: 100%;
  }

  &--wrapper {
    max-width: var(--max-width);
    transition: filter $transition-timing ease-out;
    &:hover,
    &:focus,
    &:focus-within {
      @include card-drop-shadow;
    }
  }

  // Link overlay that triggers hover styles on siblings
  &--link {
    background: none;
    color: transparent;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    text-decoration: none;
    z-index: 2;
    &:hover,
    &:focus,
    &:focus-within {
      outline: none;
      + #{$self}--wrap {
        #{$self}--eyebrow,
        #{$self}--title,
        #{$self}--intro,
        #{$self}--date,
        #{$self}--eventdate,
        #{$self}--content--item,
        #{$self}--content--item .ilo--icon {
          color: var(--ilo-color-blue);
          fill: var(--ilo-color-blue);
        }
      }
    }
    &--text {
      @include isVisuallyHidden();
    }
  }

  // Create a variable to hold the common link hover selector for typography elements
  $link-hover: "#{$self}--link:hover &, #{$self}--link:focus &, #{$self}--link:focus-within &";

  &--eyebrow {
    color: $brand-ilo-purple;
    @include font-styles("body-small");
    margin-bottom: spacing(3);
    #{ $link-hover } {
      color: var(--ilo-color-blue);
    }
  }

  &--title {
    color: var(--ilo-color-blue-dark);
    font-family: var(--ilo-fonts-display);
    font-weight: 700;
    @include font-styles("headline-5");
    @include textmargin(
      "margin-bottom",
      10px,
      "headline-5",
      "display",
      "body-small",
      "copy"
    );
    #{ $link-hover } {
      color: var(--ilo-color-blue);
    }
  }

  &--intro {
    color: var(--ilo-color-gray-charcoal);
    @include font-styles("body-small");
    margin-bottom: spacing(8);
    #{ $link-hover } {
      color: var(--ilo-color-blue);
    }
  }

  &--date {
    color: $brand-ilo-grey-accessible;
    @include font-styles("body-small");
    @include textmargin("margin-bottom", 30px, "body-small", "copy", 0, 0);
    #{ $link-hover } {
      color: var(--ilo-color-blue);
    }
  }

  &--event-date {
    @include font-styles("body-small");
    @include textmargin("margin-bottom", 30px, "body-small", "copy", 0, 0);
  }

  &--picture {
    width: 100%;
    max-width: 100%;
  }

  &--cta {
    position: relative;
    z-index: 2;
  }
}
