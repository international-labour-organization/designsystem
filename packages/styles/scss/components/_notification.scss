@use "../tokens" as *;
@use "../functions" as *;
@import "../mixins";
@import "../animations";

@mixin notification-stripe($color) {
  background: linear-gradient(
    to right,
    $color 40px,
    var(--ilo-color-white) 40px
  );
}

@mixin notification-icon($icon) {
  &:before {
    content: "";
    position: absolute;
    top: px-to-rem(24px);
    left: px-to-rem(10px);
    height: px-to-rem(20px);
    width: px-to-rem(20px);
    @include icon($icon, var(--ilo-color-white));
  }
}

.ilo--notification {
  background-color: var(--ilo-color-white);
  box-shadow:
    0px 0.8px 1.6px rgba(30, 45, 190, 0.038),
    0px 4px 8px rgba(30, 45, 190, 0.054),
    0px 10px 20px rgba(30, 45, 190, 0.08),
    0px -4px 16px rgba(30, 45, 190, 0.054);
  border-radius: 2px;
  color: var(--ilo-color-gray-charcoal);
  position: relative;

  &__type {
    &__info {
      @include notification-icon("notification_info");
      @include notification-stripe(var(--ilo-color-blue));
    }

    &__error {
      @include notification-icon("notification_error");
      @include notification-stripe(var(--ilo-color-red));
    }

    &__success {
      @include notification-icon("notification_success");
      @include notification-stripe(var(--ilo-color-green));
    }

    &__warning {
      @include notification-icon("notification_warning");
      @include notification-stripe(var(--ilo-color-yellow));
    }
  }

  &--dialog {
    max-width: px-to-rem(340px);
    width: 100%;

    @include breakpoint("md") {
      max-width: px-to-rem(490px);
    }

    .ilo--notification--content {
      padding: spacing(6);
    }
  }

  &--inline {
    max-width: px-to-rem(340px);

    .ilo--notification--content {
      padding: spacing(6);
    }

    @include breakpoint("md") {
      max-width: 100%;

      .ilo--notification--content {
        max-width: 100%;
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        padding: spacing(4) spacing(16) spacing(4) spacing(6);
      }
    }
  }

  &--content {
    margin-left: spacing(10);
    position: relative;
    width: calc(100% - 40px);

    @include breakpoint("md") {
      .ilo--notification--inline & {
        background-position: center;
      }
    }
  }

  &--headline {
    font-weight: 700;
    @include typography("highlight-medium-bold");

    margin-bottom: spacing(3);

    @include breakpoint("md") {
      .ilo--notification--inline & {
        margin-bottom: 0;
      }
    }
  }

  &--copy {
    font-weight: 400;
    @include typography("body-small");

    @include breakpoint("md") {
      .ilo--notification--inline & {
        margin-left: spacing(6);
      }
    }

    &:not(:last-child) {
      @include breakpoint("md") {
        .ilo--notification--inline & {
          flex-grow: 1;
        }
      }
    }
  }

  &--date {
    color: var(--ilo-color-gray-accessible);
    display: block;
    @include typography("body-small");

    @include breakpoint("md") {
      .ilo--notification--inline & {
        margin-left: spacing(4);
      }
    }

    &:not(:last-child) {
      margin-bottom: spacing(5);
    }

    @include breakpoint("md") {
      .ilo--notification--inline & {
        margin-bottom: 0;
      }
    }
  }

  &--cta {
    @include breakpoint("md") {
      .ilo--notification--inline & {
        margin-left: spacing(6);
      }
    }
  }

  &--close {
    background-color: var(--ilo-color-gray-light);
    border: none;
    height: px-to-rem(40px);
    position: absolute;
    display: flex;
    justify-content: center;
    align-items: center;
    right: 0;
    top: 0;
    width: px-to-rem(40px);
    cursor: pointer;

    &:after {
      content: "";
      width: px-to-rem(30px);
      height: px-to-rem(30px);
      @include icon("close", var(--ilo-color-blue-dark));
    }

    &:hover,
    &:focus {
      background-color: var(--ilo-color-blue-lighter);

      &:after {
        @include icon("close", var(--ilo-color-blue));
      }
    }

    span {
      @include isVisuallyHidden();
    }
  }
}
