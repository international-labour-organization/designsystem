@use "../tokens" as *;
@use "../functions" as *;
@import "../mixins";
@import "../config";

/**
 * This mixin is also used in _richtext.scss component to style blockquotes.
 */
@mixin blockquote {
  // Layout & background
  background-color: var(--ilo-color-blue-lighter);
  background-position: right top;
  background-repeat: no-repeat;
  background-size: px-to-rem(72px) px-to-rem(40px);
  display: block;
  width: fit-content;
  position: relative;
  border-bottom: px-to-rem(3px) solid var(--ilo-color-gray-base);
  @include cornercut(72px, 40px);

  // Typography & spacing
  font-family: var(--ilo-fonts-display);
  padding: spacing(19) 0 spacing(9) spacing(8);

  p {
    @include typography("blockquote", true);
    color: var(--ilo-color-purple);
    padding: 0 spacing(12) 0 0;
    margin-bottom: spacing(6);
    position: relative;

    &:after {
      content: "";
      display: inline-block;
      position: absolute;
      bottom: 0;
      right: 0;
      width: px-to-rem(26.5px);
      height: px-to-rem(20px);
      transform: scaleX(-1);
      @include icon("quote", var(--ilo-color-purple));
    }
  }

  cite {
    color: var(--ilo-color-gray-accessible);
    font-weight: 400;
    font-size: var(--ilo-font-size-sm);
    line-height: 135%;
    letter-spacing: 0;
    font-style: normal;
  }

  &:before {
    content: "";
    display: inline-block;
    position: absolute;
    top: 0;
    left: 0;
    width: px-to-rem(53px);
    height: px-to-rem(40px);
    @include icon("quote", var(--ilo-color-purple));
  }

  @include breakpoint("md") {
    background-size: px-to-rem(86px) px-to-rem(48px);
    padding: spacing(16) 0 spacing(12) spacing(12);
    @include cornercut(86px, 48px);

    p {
      padding: 0 spacing(12) 0 0;
      position: relative;
      @include typography("blockquote", false);

      &:after {
        width: px-to-rem(32px);
        height: px-to-rem(24px);
      }
    }

    &:before {
      width: px-to-rem(64px);
      height: px-to-rem(48px);
    }
  }

  [dir="rtl"] & {
    background-position: -1px -1px;
    padding: spacing(14) spacing(8) spacing(9) 0;
    @include cornercut(72px, 40px, "left");

    p {
      padding: 0 0 0 spacing(12);

      &:after {
        left: 0;
        right: auto;
        transform: scaleX(1);
      }
    }

    &:before {
      left: auto;
      right: 0;
      transform: scaleX(-1);
    }

    @include breakpoint("md") {
      padding: spacing(15) spacing(12) spacing(12) 0;
      @include cornercut(86px, 48px, "left");
    }
  }
}

.ilo--blockquote {
  @include blockquote;
}
