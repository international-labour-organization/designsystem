@use "../tokens" as *;
@use "../functions" as *;
@import "../mixins";
@import "../config";

// =============================================================================
// ACCORDION COMPONENT
// =============================================================================

.#{$prefix}--accordion {
  // CSS Custom Properties
  // ---------------------------------------------------------------------------
  --ilo-accordion-color-icon: var(--ilo-color-blue-dark);
  --ilo-accordion-transition-timing: 500ms; // Slower timing for smooth height transitions
  --ilo-accordion-scroll-max-height: 300px;

  $accordion: &;

  // Icon Styles
  // ---------------------------------------------------------------------------
  &--icon {
    width: 24px;
    height: 24px;
  }

  // Label Styles
  // ---------------------------------------------------------------------------
  &--label {
    flex: 1;
    padding-right: 10px;
  }

  // Button Styles
  // ---------------------------------------------------------------------------
  &--button {
    // Layout
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    width: 100%;
    margin: 0;

    // Spacing
    padding-block: spacing(4);
    padding-inline-end: spacing(1);

    // Visual
    background-color: var(--ilo-color-white);
    border: none;
    border-top: 2px solid var(--ilo-color-gray-light);
    color: var(--ilo-color-blue-dark);

    // Animation
    transition: all var(--ilo-accordion-transition-timing) ease-in-out;

    // Typography
    @include typography("highlight-medium");

    // Large variant
    &__large {
      @include typography("highlight-large");
      padding-block: spacing(5);
    }

    // Expanded state
    &[aria-expanded="true"] {
      background-color: var(--ilo-color-blue-lighter);

      #{$accordion}--icon {
        @include icon("minus", var(--ilo-color-blue));
      }
    }

    // Collapsed state
    &[aria-expanded="false"] {
      #{$accordion}--icon {
        @include icon("plus", var(--ilo-color-blue-dark));
      }
    }

    // Interactive states
    &:hover,
    &:focus {
      --ilo-accordion-color-icon: var(--ilo-color-blue);
      border-top-color: var(--ilo-color-blue);
      color: var(--ilo-color-blue);
      cursor: pointer;
    }

    // Responsive adjustments
    @include breakpoint("md") {
      @include typography("highlight-medium");

      &__large {
        @include typography("highlight-large");
        padding: spacing(5) 0;
      }
    }
  }

  // Panel Styles
  // ---------------------------------------------------------------------------
  &--panel {
    $panel: &;

    // Collapsed state
    max-height: 0;
    overflow: hidden;
    transition: all var(--ilo-accordion-transition-timing)
      cubic-bezier(0, 1, 0, 1);

    // Inner panel content
    #{$accordion}--innerpanel {
      padding-top: spacing(2);
      padding-bottom: spacing(9);
      padding-inline-end: spacing(8);
    }

    // Open state
    &__open {
      max-height: 100vh;
      transition: all var(--ilo-accordion-transition-timing) ease-in-out;

      // Scrollable variant
      &#{$panel}__scroll {
        max-height: var(--ilo-accordion-scroll-max-height);
        overflow-y: auto;
      }
    }
  }
}
