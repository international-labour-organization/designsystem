{# fieldset.twig #}

{% set baseClass = prefix ~ "--fieldset" %}
{% set wrapClass = baseClass ~ "--wrap__" ~ wrap %}
{% set directionClass = baseClass ~ "--direction__" ~ direction %}
{% set helperClass = baseClass ~ "--helper" %}
{% set errorClass = baseClass ~ "__error" %}
{% set disabledClass = baseClass ~ "__disabled" %}

{% set fieldsetClasses = [className, baseClass, wrapClass, directionClass] %}
{% if disabled %}
    {% set fieldsetClasses = fieldsetClasses|merge([disabledClass]) %}
{% endif %}

{% set helperClasses = [helperClass] %}
{% if hasError %}
    {% set helperClasses = helperClasses|merge([errorClass]) %}
{% endif %}

{% set showHelper = helper or hasError %}
{% set helperMessage = hasError ? errorMessage : helper %}

<fieldset class="{{ fieldsetClasses|join(' ') }}">
  {% if legend or helper %}
      <div class="{{ baseClass ~ '--legend-wrapper' }}">
          {% if legend %}
              <legend class="{{ baseClass ~ '--legend' }}">
                  {{ legend }}
                  {% if tooltip %}
                      {% include '@components/tooltip/tooltip.twig' with {
                          'className': baseClass ~ '--legend--tooltip',
                          'icon': true,
                          'label': tooltip,
                          'theme': 'dark'
                      } only %}
                  {% endif %}
              </legend>
          {% endif %}
          {% if showHelper %}
              <span class="{{ helperClasses|join(' ') }}">{{ helperMessage }}</span>
          {% endif %}
      </div>
  {% endif %}
  <div class="{{ baseClass ~ '--elements' }}">
      {# Child content goes here. In the context of Twig, this might be blocks or includes. #}
      {{ block('content') }}
  </div>
</fieldset>
